<%
{include/config.i}
{include/seguranca.i "GET"}
{include/contenttype.i "text/html"}
{include/app.i}

/**
   * 
 * ---------------
 *
 *  - Portal de Manifesta��o de Clientes - SAC
 *
 * Autor: carloseloi.prado@gmail.com
 */

%>

<!DOCTYPE html>
<html>

<% {view/layout/html_head_open_manifestacao.i} %>

<body id="page-top" ng-app="app" ng-controller="DashboardManifestacao as main">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <% {view/layout/html_menu.i} %>

    <!-- Begin Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <% {view/layout/html_topbar.i} %>

        <!-- Begin Page Content -->
        <div class="container-fluid">
            <!-- Page Heading -->
            <h1 class="h3 mb-2 text-gray-800">DashBoard de Manifesta&ccedil;&otilde;es</h1>
            <p class="mb-4">Aplicar filtros e exibir resultado da consulta de manifesta&ccedil;&otilde;es nos gr&acute;ficos.</p>

            <!-- Content Row -->  
            <div class="row">                

              <!-- Area consulta manifestacoes -->
              <div class="col-xl-12 col-lg-10">
                <div class="card shadow mb-4">
                  <!-- Card Header - Dropdown -->
                  <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">DashBoard de Manifesta&ccedil;&otilde;es:</h6>                    
                  </div>
                  <!-- Card Body -->
                  <div class="card-body">                                       
                    <form class="user" name="formManifestacao" id="formManifestacao">
                      <div class="form-group row">
                        <div class="col-sm-4 text-left">
                          <label for="origem">Origem</label>
                        </div>
                        <div class="col-sm-4 text-left">
                          <label for="origem">Tipo</label>
                        </div>
                        <div class="col-sm-4 text-left">
                          <label for="origem">UF</label>
                        </div>                              
                      </div>
                      <div class="form-group row">
                        <div class="col-sm-4">
                          <select class="form-control selectpicker" name="origem" id="origem" data-live-search="true"  
                          required data-style="btn-primary">
                          <option data-tokens="todos">Todos</option>
                            <option data-tokens="0800">0800</option>
                            <option data-tokens="Email">Email (Blog / Site)</option>
                            <option data-tokens="Redes" >Redes Sociais</option>
                            <option data-tokens="Outros" >Outros</option>
                          </select> 
                        </div> 
                        <div class="col-sm-4">
                          <select class="form-control selectpicker" name="tipo" id="tipo" required  data-live-search="true" data-style="btn-primary">
                            <option value='todos' data-tokens="todos">Todos</option>
                            <option value='elogio' data-tokens="elogio">Elogio</option>
                            <option value='informacao' data-tokens="informacao">Informa&ccedil;&atilde;o</option>
                            <option value='sugestao' data-tokens="sugestao" >Sugest&atilde;o</option>
                            <option value='reclamacao' data-tokens="reclamacao" >Reclama&ccedil;&atilde;o</option>
                            <option value='solicitacao' data-tokens="solicitacao" >Solicita&ccedil;&atilde;o</option>
                            <option value='ondeencontrar' data-tokens="ondeencontrar" >Onde Encontrar</option>
                          </select> 
                        </div>
                        <div class="col-sm-4">
                          <select class="form-control selectpicker" name="uf" id="uf" required  data-live-search="true" data-style="btn-primary">
                              <option value="todos" data-tokens="todos">Todos</option>
                              <option value="AC" data-tokens="Acre">Acre</option>
                              <option value="AL" data-tokens="Alagoas">Alagoas</option>
                              <option value="AP" data-tokens="Amap&aacute;">Amap&aacute;</option>
                              <option value="AM" data-tokens="Amazonas">Amazonas</option>
                              <option value="BA" data-tokens="Bahia">Bahia</option>
                              <option value="CE" data-tokens="Cear&aacute;">Cear&aacute;</option>
                              <option value="DF" data-tokens="Distrito Federal">Distrito Federal</option>
                              <option value="ES" data-tokens="Esp&iacute;rito Santo">Esp&iacute;rito Santo</option>
                              <option value="GO" data-tokens="Goi&aacute;s">Goi&aacute;s</option>
                              <option value="MA" data-tokens="Maranh&atilde;o">Maranh&atilde;o</option>
                              <option value="MT" data-tokens="Mato Grosso">Mato Grosso</option>
                              <option value="MS" data-tokens="Mato Grosso do Sul">Mato Grosso do Sul</option>
                              <option value="MG" data-tokens="Minas Gerais">Minas Gerais</option>
                              <option value="PA" data-tokens="Par&aacute;">Par&aacute;</option>
                              <option value="PB" data-tokens="Para&iacute;ba">Para&iacute;ba</option>
                              <option value="PR" data-tokens="Paran&aacute;">Paran&aacute;</option>
                              <option value="PE" data-tokens="Pernambuco">Pernambuco</option>
                              <option value="PI" data-tokens="Piau&iacute;">Piau&iacute;</option>
                              <option value="RJ" data-tokens="Rio de Janeiro">Rio de Janeiro</option>
                              <option value="RN" data-tokens="Rio Grande do Norte">Rio Grande do Norte</option>
                              <option value="RS" data-tokens="Rio Grande do Sul">Rio Grande do Sul</option>
                              <option value="RO" data-tokens="Rond?nia">Rond&ocirc;nia</option>
                              <option value="RR" data-tokens="Roraima">Roraima</option>
                              <option value="SC" data-tokens="Santa Catarina">Santa Catarina</option>
                              <option value="SP" data-tokens="S&atilde;o Paulo">S&atilde;o Paulo</option>
                              <option value="SE" data-tokens="Sergipe">Sergipe</option>
                              <option value="TO" data-tokens="Tocantins">Tocantins</option>
                          </select> 
                        </div>                             
                      </div>
                      
                      <div class="form-group row">
                        <div class="col-sm-4 text-left">
                          <label for="origem">Data In&iacute;cio</label>
                        </div>
                        <div class="col-sm-4 text-left">
                          <label for="origem">Data Fim</label>
                        </div>
                        <div class="col-sm-4 text-left">
                          <label for="origem">&nbsp;</label>
                        </div>                              
                      </div>
                      <div class="form-group row">
                        <div class="input-group col-sm-4"> 
                            <input type="text" class="form-control datapicker" id="dtini" ng-model="dtini"  /> 
                            <div class="input-group-append" id="btnDtIni">
                              <button class="btn btn-primary" type="button">
                                <a href="#" style="color: #FFFFFF"><i class="fas fa-calendar fa-sm"></i></a>
                              </button>                  
                            </div>                          
                        </div>
                        <div class="input-group col-sm-4"> 
                            <input type="text" class="form-control datapicker" id="dtfim" ng-model="dtfim"  /> 
                            <div class="input-group-append" id="btnDtFim">
                              <button class="btn btn-primary" type="button" >
                                <a href="#" style="color: #FFFFFF"><i class="fas fa-calendar fa-sm"></i></a>
                              </button>                  
                            </div>                          
                        </div>
                        <div class="col-sm-4"> 
                            <button class="btn btn-success btn-block" ng-click="buscamanifestacoes()">Buscar</button>                           
                        </div>
                      </div>                          
                    </form>                                        
                  </div><hr>
                </div>

                <div class="row">
                    <div class="col-xl-8 col-lg-7">
                        <!-- Bar Chart -->
                        <div class="card shadow mb-4">
                            
                            <div class="card-body">
                                <div class="chart-bar">
                                    <canvas id="myBarChart"></canvas>
                                </div>
                                <hr>                            
                            </div>
                        </div>
                    </div>
                    <!-- Pie Chart --> 
                    <div class="col-xl-4 col-lg-5">               
                        <div class="card shadow mb-4">
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-pie pt-4">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0">
                                            </div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0">
                                            </div>
                                        </div>
                                    </div>
                                    <canvas id="myPieChart" width="310" height="216" class="chartjs-render-monitor" style="display: block; width: 310px; height: 216px;">
                                    </canvas>
                                </div>
                                <div class="mt-4 text-center small">
                                    <span class="mr-2">
                                        <i class="fas fa-circle" style="color: #f5eb55"></i> Abertas
                                    </span>
                                    <span class="mr-2">
                                        <i class="fas fa-circle" style="color: #CEECF5"></i> Em Andamento
                                    </span>                                    
                                    <span class="mr-2">
                                      <i class="fas fa-circle" style="color: #f16153"></i> Pendentes
                                  </span>
                                    <span class="mr-2">
                                      <i class="fas fa-circle" style="color: #1cc88a"></i> Solucionada
                                    </span>
                                    <span class="mr-2">
                                      <i class="fas fa-circle" style="color: #d0cdcd"></i> Finalizada
                                    </span>
                                </div>
                                <hr>
                            </div>                        
                        </div>
                    </div>                        
                        
                </div>
              </div>
            </div>
          </div>
          <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <% {view/layout/html_copyright.i} %>

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->
  
  <% {view/layout/html_logoutmodal.i} %>

  <% {view/layout/html_footer_open_manifestacao.i} %>    

  <!--script>
    window.addEventListener('load', function() {
      // Set new default font family and font color to mimic Bootstrap's default styling
      Chart.defaults.global.defaultFontFamily = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
      Chart.defaults.global.defaultFontColor = '#858796';

      // Pie Chart Example
      var ctxPie = document.getElementById("myPieChart");
      var myPieChart = new Chart(ctxPie, {
        type: 'doughnut',
        data: {
          labels: ["Abertas", "Pendentes", "No Prazo"],
          datasets: [{
            data: [55, 30, 15],
            backgroundColor: ['#4e73df', '#f16153', '#1cc88a'],
            hoverBackgroundColor: ['#2e59d9', '#f16153', '#1cc88a'],
            hoverBorderColor: "rgba(234, 236, 244, 1)",
          }],
        },
        options: {
          maintainAspectRatio: false,
          tooltips: {
            backgroundColor: "rgb(255,255,255)",
            bodyFontColor: "#858796",
            borderColor: '#dddfeb',
            borderWidth: 1,
            xPadding: 15,
            yPadding: 15,
            displayColors: false,
            caretPadding: 10,
          },
          legend: {
            display: false
          },
          cutoutPercentage: 80,
        },
      });

      // Bar Chart Example
      var ctxBar = document.getElementById("myBarChart");
      var myBarChart = new Chart(ctxBar, {
        type: 'bar',
        data: {
            labels: ["Aberta", "Em Andamento", "Pendente", "Solucionada", "Finalizada"],
            datasets: [{
            label: "Total",
            backgroundColor: ['#4e73df', '#CEECF5', '#f16153', '#1cc88a','#F2F2F2'],
            hoverBackgroundColor: ['#4e73df', '#CEECF5','#f16153', '#1cc88a','#F2F2F2'],
            borderColor: ['#4e73df', '#CEECF5','#f16153', '#1cc88a','#F2F2F2'],
            data: [4215, 5312, 6251, 7841, 9821],
            }],
        },
        options: {
            maintainAspectRatio: false,
            layout: {
            padding: {
                left: 10,
                right: 25,
                top: 25,
                bottom: 0
            }
            },
            scales: {
            xAxes: [{
                time: {
                unit: 'month'
                },
                gridLines: {
                display: false,
                drawBorder: false
                },
                ticks: {
                maxTicksLimit: 6
                },
                maxBarThickness: 25,
            }],
            yAxes: [{
                ticks: {
                min: 0,
                max: 15000,
                maxTicksLimit: 5,
                padding: 10,
                // Include a dollar sign in the ticks
                callback: function(value, index, values) {
                    return ' ' + value;
                }
                },
                gridLines: {
                color: "rgb(234, 236, 244)",
                zeroLineColor: "rgb(234, 236, 244)",
                drawBorder: false,
                borderDash: [2],
                zeroLineBorderDash: [2]
                }
            }],
            },
            legend: {
            display: false
            },
            tooltips: {
                titleMarginBottom: 10,
                titleFontColor: '#6e707e',
                titleFontSize: 14,
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                caretPadding: 10,
                callbacks: {
                    label: function(tooltipItem, chart) {
                        var datasetLabel = chart.datasets[tooltipItem.datasetIndex].label || '';
                        return datasetLabel + ': ' + tooltipItem.yLabel;
                    }
                }
            },
        }
      });


    });
  </script--> 
  
</body>
</html>
